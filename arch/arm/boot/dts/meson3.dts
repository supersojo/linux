// SPDX-License-Identifier: GPL-2.0 OR MIT
/*
 * Copyright 2014 Carlo Caione <carlo@caione.org>
 */

/dts-v1/;

#include <dt-bindings/interrupt-controller/irq.h>
#include <dt-bindings/interrupt-controller/arm-gic.h>

/ {

	compatible = "amlogic,meson3";

	#address-cells = <1>;
	#size-cells = <1>;
	interrupt-parent = <&meson3_intc>;
	
	aliases {
		serial0 = &uart_AO;
/*
		serial1 = &uart_A;
		serial2 = &uart_B;
		serial3 = &uart_C;
*/
	};

	soc {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <1>;
		ranges;

		cbus: cbus@c1100000 {
			compatible = "simple-bus";
			reg = <0xc1100000 0x200000>;
			#address-cells = <1>;
			#size-cells = <1>;
			ranges = <0x0 0xc1100000 0x200000>;

/*
			uart_A: serial@84c0 {
				compatible = "amlogic,meson3-uart";
				reg = <0x84c0 0x18>;
				interrupts = <26 IRQ_TYPE_EDGE_RISING>;
				status = "disabled";
			};

			uart_B: serial@84dc {
				compatible = "amlogic,meson3-uart";
				reg = <0x84dc 0x18>;
				interrupts = <75 IRQ_TYPE_EDGE_RISING>;
				status = "disabled";
			};

			uart_C: serial@8700 {
				compatible = "amlogic,meson3-uart";
				reg = <0x8700 0x18>;
				interrupts = <93 IRQ_TYPE_EDGE_RISING>;
				status = "disabled";
			};
*/

			meson3_nfc: nfc@8600 {
				compatible = "amlogic,meson-8726m3-nfc";
				reg = <0x8600 0x30>;
				interrupts = <34 IRQ_TYPE_EDGE_RISING>;

				#address-cells = <1>;
				#size-cells = <0>;

				nand@0 {
					reg = <0>;
					nand-ecc-mode = "hw";
					nand-ecc-algo = "bch";
					nand-ecc-placement = "oob";
					nand-ecc-strength = <30>;
					nand-ecc-step-size = <1024>;
					nand-bus-width = <8>;


					partitions {
						compatible = "fixed-partitions";
						#address-cells = <1>;
						#size-cells = <1>;


						partition@1000000 {
							label = "rootfs";
							reg = <0x1000000 0x2000000>;
						};
					};

				};
			};

			meson3_intc: interrupt-controller@9A40 {
				compatible = "amlogic,meson-intc";
				reg = <0x9A40 0x40>;
				interrupt-controller;
				#interrupt-cells = <2>;
			};
			
			timer_abcde: timer@9940 {
				compatible = "amlogic,meson3-timer";
				reg = <0x9940 0x18>;
				interrupts = <10 IRQ_TYPE_EDGE_RISING>,
					     <11 IRQ_TYPE_EDGE_RISING>,
					     <6 IRQ_TYPE_EDGE_RISING>,
					     <29 IRQ_TYPE_EDGE_RISING>;

			};
		}; /* cbus */

		L2: cache-controller@c4200000 {
			compatible = "arm,pl310-cache";
			reg = <0xc4200000 0x1000>;
			cache-unified;
			cache-level = <2>;
		};

		periph: bus@c4300000 {
			compatible = "simple-bus";
			reg = <0xc4300000 0x10000>;
			#address-cells = <1>;
			#size-cells = <1>;
			ranges = <0x0 0xc4300000 0x10000>;

		};

		aobus: aobus@c8100000 {
			compatible = "simple-bus";
			reg = <0xc8100000 0x100000>;
			#address-cells = <1>;
			#size-cells = <1>;
			ranges = <0x0 0xc8100000 0x100000>;

			uart_AO: serial@4c0 {
				compatible = "amlogic,meson3-uart";
				reg = <0x4c0 0x18>;
				interrupts = <90 IRQ_TYPE_EDGE_RISING>;
			};

			rtc: rtc@8740 {
				compatible = "amlogic,meson3-rtc";
				reg = <0x8740 0x14>;
				interrupts = <72 IRQ_TYPE_EDGE_RISING>;
				#address-cells = <1>;
				#size-cells = <1>;
				status = "disabled";
			};
		};/* aobus*/

		ethmac: ethernet@c9410000 {
			compatible = "amlogic,meson6-dwmac","snps,dwmac";
			reg = <0xc9410000 0x10000
			       0xc1108108 0x4>;
			interrupts = <8 IRQ_TYPE_EDGE_RISING>;
			interrupt-names = "macirq";
			
			phy-mode = "rmii";
			status = "okay";
		};

	};/* soc */

	xtal: xtal-clk {
		compatible = "fixed-clock";
		clock-frequency = <24000000>;
		clock-output-names = "xtal";
		#clock-cells = <0>;
	};

};

